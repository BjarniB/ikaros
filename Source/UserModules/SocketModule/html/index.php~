<?php
$array = $_POST['servo'];
//echo $array[0][0][0] ." has ".count($array[0][0]) ." points";


$send = "";

for ($i = 0; $i < count($array); $i++) {
	$send[$i] = $i." ";
	for ($n = 0; $n < count($array[$i]); $n++) {
    	$send[$i] .= round($array[$i][$n][1],2).":".round($array[$i][$n][2],2)." ";
    }
	$send[$i] .= "\0";
} 

echo $send[0];

$server_ip   = '127.0.0.1';
$server_port = 9100;
$beat_period = 5;
$message     = 'PyHB';
print "Sending heartbeat to IP $server_ip, port $server_port\n";
print "press Ctrl-C to stop\n";
if ($socket = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP)) {
for ($i = 0; $i < count($send); $i++) {
    socket_sendto($socket, $send[$i], strlen($send[$i]), 0, $server_ip, $server_port);
}
    print "Time: " . date("%r") . "\n";
} else {
  print("can't create socket\n");
}
?>
